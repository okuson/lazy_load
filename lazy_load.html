<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">
    <title>product list</title>
</head>
<body>
<table id="tbl_products">
    <thead>
    <tr>
        <th>id</th>
        <th>image</th>
        <th>code</th>
        <th>name</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>1</td>
        <td><img data-src="./img/apple.jpg"></td>
        <td>apple-0001</td>
        <td>リンゴ</td>
    </tr>
    <tr>
        <td>2</td>
        <td><img data-src="./img/banana.jpg"></td>
        <td>banana-0001</td>
        <td>バナナ</td>
    </tr>
    <tr>
        <td>3</td>
        <td><img data-src="./img/pineapple.jpg"></td>
        <td>pineapple-0001</td>
        <td>パイナップル</td>
    </tr>
    <tr>
        <td>4</td>
        <td><img data-src="./img/watermelon.jpg"></td>
        <td>watermelon-0001</td>
        <td>スイカ</td>
    </tr>
    <tr>
        <td>5</td>
        <td><img data-src="./img/cherry.jpg"></td>
        <td>cherry-0001</td>
        <td>サクランボ</td>
    </tr>
    </tbody>
</table>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('#tbl_products').DataTable({
            drawCallback: function () {
                var imgs = document.querySelectorAll("img");
                var data_src;
                for (var i = 0; i < imgs.length; i++) {
                    data_src = imgs[i].getAttribute('data-src');
                    if (data_src) {
                        imgs[i].src = data_src;
                        imgs[i].onload = function () {
                            this.removeAttribute('data-src');
                        };
                    }
                }
            },
            pageLength: 2
        });
    });
</script>
</body>
</html>
